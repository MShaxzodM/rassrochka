<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Document</title>
    </head>
    <body>
        <input name="file" id="file" type="file" />
        <input name="pcopy" id="pcopy" type="file" />
        <input name="images" id="images" type="file" />
        <input name="images" type="file" />
        <button id="btn">fds</button>
        <style>
            .gallery {
              display: flex;
              flex-wrap: wrap;
            }
            .gallery img {
              width: 200px;
              height: 150px;
              object-fit: cover;
              margin: 10px;
            }
          </style>
        </head>
        <body>
          <div class="gallery"></div>
          <script>
          fetch('http://95.130.227.89:3000/clients/144/file',{
            headers:{'x-auth-token':'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6IkFkbWluIiwicGFzc3dvcmQiOiJxd2VydHk4OGlpQEReIiwiaWF0IjoxNjg2NTk5NDQ2LCJleHAiOjE2ODY2ODU4NDZ9.p0BwHJj56fEPDLcatxJ9DFxfkpN4n_O5zSJtXczB0Hs'}
          })
          .then(res=>res.json())
              .then(res => {
                  const gallery = document.querySelector('.gallery');
                  const link = document.createElement('a');
                  link.setAttribute('href', res.url);


                  link.textContent = 'Click me';
                  
                  gallery.appendChild(link);
                })
               
                
              .catch(error => console.error('Error fetching images:', error));
              </script>
          <script>
            fetch('http://95.130.227.89:3000/clients/144/images',{
            headers:{'x-auth-token':'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6IkFkbWluIiwicGFzc3dvcmQiOiJxd2VydHk4OGlpQEReIiwiaWF0IjoxNjg2NTk5NDQ2LCJleHAiOjE2ODY2ODU4NDZ9.p0BwHJj56fEPDLcatxJ9DFxfkpN4n_O5zSJtXczB0Hs'}
          })
              .then(response => response.json())
              .then(data => {
                data.map(image=>{
                  const gallery = document.querySelector('.gallery');
                  const img = document.createElement('img');
                  img.src = image.imageUrl
                  
                  gallery.appendChild(img);
                })
               
                
              })
              .catch(error => console.error('Error fetching images:', error));
          </script>
        <script>
            async function goo() {
                const jsonData = {
                    first_name: "user3",
                    last_name: "3lastname",
                    phone: "123456",
                    total_sum: 40000000,
                    first_payment: 5000000,
                    months: 4,
                    date: "2023-06-03",
                    restaurant_id: 1,
                    procent: 4,
                    fine_procent: 0.1,
                    address: "beruniy",
                    password_sk: "ksldk43",
                    password_address: "32beeee",
                    kepil1_first_name: "kepil1",
                    kepil1_last_name: "kepil1_lastname",
                    kepil1_phone: "32224",
                    kepil1_address: "mmmkkji",
                    kepil1_password_sk: "2343",
                    kepil1_password_address: "beruniy",
                    kepil2_first_name: "kwpil2",
                    kepil2_last_name: "kepil2_lastname",
                    kepil2_phone: "21343222233",
                    kepil2_address: "sdhc",
                    kepil2_password_sk: "32523",
                    kepil2_password_address: "beruniy",
                    work:"itpark",
                    card_number:'2190843789',
                    card_date:'23/6',
                    kepil1_work:'from home',
                    kepil2_work:'data'

                };
                var myHeaders = new Headers();
                myHeaders.append("authorization",'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6IkFkbWluIiwicGFzc3dvcmQiOiJxd2VydHk4OGlpQEReIiwiaWF0IjoxNjg2NjU1NTg3LCJleHAiOjE2ODY3NDE5ODd9.lszpYj6PfJ7KLlDFYF22YnIP8-pPwvtyR4xUBT2LiJk')
                var formData = new FormData();
                Object.entries(jsonData).forEach(([key, value]) => {
                    formData.append(key, value);
                });
                formData.append(
                    "file",
                    document.getElementById("file").files[0],
                    document.getElementById("file").value
                );
                console.log(document.getElementById("pcopy").files[0])
                console.log(document.getElementById("pcopy").value)
                formData.append(
                    "pcopy",
                    document.getElementById("pcopy").files[0],
                    document.getElementById("pcopy").value
                );
                document.getElementsByName("images").forEach((e) => {
                    formData.append("images", e.files[0], e.value);
                });

                var requestOptions = {
                    method: "POST",
                    headers: myHeaders,
                    body: formData,
                    redirect: "follow",
                };

                fetch("http://95.130.227.89:3000/post", requestOptions)
                    .then((response) => response.text())
                    .then((result) => console.log(result))
                    .catch((error) => console.log("error", error));
            }

            document.getElementById("btn").addEventListener("click", (e) => {
                goo();
            });
        </script>
    </body>
</html>
